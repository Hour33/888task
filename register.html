<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register | Hour33</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#fff;
  margin:0;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.banner{width:100%;max-width:500px;margin-top:20px}
.banner img{width:100%;border-radius:12px}
.card{
  background:#fff;
  padding:25px;
  border-radius:20px;
  box-shadow:0 6px 18px rgba(0,0,0,.1);
  width:90%;
  max-width:400px;
  margin-top:-25px;
  text-align:center;
  border:1px solid #ccc;
}
input{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  width:100%;
  padding:12px;
  background:#4caf50;
  color:#fff;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
input[readonly]{background:#f5f5f5}
#msg{margin-top:10px;font-size:14px}
a{color:#1e88e5;text-decoration:none;font-weight:bold}
</style>
</head>

<body>

<div class="banner">
<img src="https://i.postimg.cc/Pq66mhjL/file-00000000848c71f4aefb45586e4fb843.png">
</div>

<div class="card">
<h2>Create Account</h2>

<input id="phone" placeholder="Account">
<input id="password" type="password" placeholder="Password">
<input id="confirmPassword" type="password" placeholder="Confirm Password">

<input value="30Q4782N" readonly>

<!-- ðŸ”¥ IMPORTANT FIX -->
<button id="registerBtn" type="button">Register</button>

<p>Already have an account? <a href="login.html">Login</a></p>
<div id="msg"></div>
</div>

<script>
const SHEETY_URL="https://api.sheety.co/9b805411b5ecdb493c774c33fb4e5b61/usersDb3/usersDb3";

document.getElementById("registerBtn").onclick=async()=>{
  const phone=document.getElementById("phone").value.trim();
  const password=document.getElementById("password").value.trim();
  const confirm=document.getElementById("confirmPassword").value.trim();
  const msg=document.getElementById("msg");

  if(!phone||!password||!confirm){
    msg.style.color="red";
    msg.textContent="Fill all fields";
    return;
  }
  if(password!==confirm){
    msg.style.color="red";
    msg.textContent="Passwords do not match";
    return;
  }

  msg.style.color="#4caf50";
  msg.textContent="Registering...";

  try{
    const check=await fetch(SHEETY_URL+`?filter[phone]=${encodeURIComponent(phone)}`);
    const checkData=await check.json();
    if(checkData.usersDb3.length){
      msg.style.color="red";
      msg.textContent="Account already exists";
      return;
    }

    const res=await fetch(SHEETY_URL,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({
        usersDb3:{phone,password,balance:200}
      })
    });

    if(!res.ok) throw "";

    msg.textContent="Registered successfully!";
    setTimeout(()=>location.href="login.html",1200);

  }catch{
    msg.style.color="red";
    msg.textContent="Registration failed";
  }
};
</script>

</body>
</html>
